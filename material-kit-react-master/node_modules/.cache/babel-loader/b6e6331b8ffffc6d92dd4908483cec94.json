{"ast":null,"code":"import _objectSpread from \"/home/abhishek/Projects/Stp-II/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/abhishek/Projects/Stp-II/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/abhishek/Projects/Stp-II/Fuse-React-v3.0.0-skeleton/src/app/main/academy/course/tabs/ShareForm.js\";\nimport React, { useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axiosInstance from 'app/main/axios';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport * as Actions from '../../store/actions';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    text: {\n      width: \"70ch\"\n    }\n  };\n});\nexport default function ShareForm(props) {\n  var classes = useStyles();\n  var dispatch = useDispatch();\n  var course = useSelector(function (_ref) {\n    var academyApp = _ref.academyApp;\n    return academyApp.course;\n  });\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      attachOpen = _React$useState4[0],\n      setAttachOpen = _React$useState4[1];\n\n  var _React$useState5 = React.useState({}),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      post = _React$useState6[0],\n      setPost = _React$useState6[1];\n\n  var _React$useState7 = React.useState(0),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      tag = _React$useState8[0],\n      setTag = _React$useState8[1];\n\n  var _React$useState9 = React.useState(\"all\"),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      type = _React$useState10[0],\n      setType = _React$useState10[1];\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleAttachOpen = function handleAttachOpen() {\n    setAttachOpen(true);\n  };\n\n  var handleAttachClose = function handleAttachClose() {\n    setAttachOpen(false);\n  };\n\n  var handleTitleChange = function handleTitleChange(event) {\n    setPost(_objectSpread({}, post, {\n      'title': event.target.value\n    }));\n  };\n\n  var handleBodyChange = function handleBodyChange(event) {\n    setPost(_objectSpread({}, post, {\n      'body': event.target.value\n    }));\n  };\n\n  function handleFileUpload(event) {\n    console.log(event.target.value);\n    setPost(_objectSpread({}, post, {\n      'file': event.target.files[0]\n    }));\n    setAttachOpen(false);\n  }\n\n  function handleSubmit() {\n    var formData = new FormData();\n    formData.append('file', post.file);\n    formData.append('body', post.body);\n    formData.append('title', post.title);\n    formData.append('courseId', props.data.courseId);\n    formData.append('tag', course.tagList[tag].id);\n    formData.append('postType', type);\n    axiosInstance.post('post-in-class/', formData, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(Actions.addPost(res.data));\n    }).catch(function (err) {\n      console.log(err);\n    });\n    handleAttachClose();\n    handleClose();\n  }\n\n  var handleTagChange = function handleTagChange(event) {\n    setTag(event.target.value);\n  };\n\n  var handleTypeChange = function handleTypeChange(event) {\n    setType(event.target.value);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"inherit\",\n    onClick: handleClickOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Share or Announce Something\"), React.createElement(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Share / Announce Form \"), React.createElement(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    autoFocus: true,\n    id: \"name\",\n    label: \"title\",\n    margin: \"dense\",\n    type: \"text\",\n    variant: \"outlined\",\n    fullWidth: true,\n    onChange: handleTitleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    autoFocus: true,\n    id: \"name\",\n    label: \"body\",\n    margin: \"dense\",\n    type: \"text\",\n    variant: \"outlined\",\n    fullWidth: true,\n    multiline: true,\n    onChange: handleBodyChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    onChange: handleTagChange,\n    value: tag,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, course == null ? null : course.tagList.map(function (item, index) {\n    return React.createElement(MenuItem, {\n      value: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, item.tag);\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), React.createElement(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    onChange: handleTypeChange,\n    value: type,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    value: \"all\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"All\"), React.createElement(MenuItem, {\n    value: \"material\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Material\"), React.createElement(MenuItem, {\n    value: \"assignments\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Assignments\"), React.createElement(MenuItem, {\n    value: \"exams\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Exams\"))), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"normal-case\",\n    variant: \"outlined\",\n    color: \"inherit\",\n    onClick: handleAttachOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"Attach\"), React.createElement(Dialog, {\n    open: attachOpen,\n    onClose: handleAttachClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"Attach file\"), React.createElement(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleFileUpload,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }))), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"normal-case\",\n    variant: \"outlined\",\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Attach\"), React.createElement(Button, {\n    onClick: handleAttachClose,\n    className: \"normal-case\",\n    variant: \"outlined\",\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Discard\"))), React.createElement(Button, {\n    onClick: handleClose,\n    className: \"normal-case\",\n    variant: \"outlined\",\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"Discard\"), React.createElement(Button, {\n    onClick: handleSubmit,\n    variant: \"outlined\",\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Post\"))));\n}","map":{"version":3,"sources":["/home/abhishek/Projects/Stp-II/Fuse-React-v3.0.0-skeleton/src/app/main/academy/course/tabs/ShareForm.js"],"names":["React","useEffect","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","makeStyles","useDispatch","useSelector","axiosInstance","MenuItem","Select","Actions","useStyles","theme","text","width","ShareForm","props","classes","dispatch","course","academyApp","useState","open","setOpen","attachOpen","setAttachOpen","post","setPost","tag","setTag","type","setType","handleClickOpen","handleClose","handleAttachOpen","handleAttachClose","handleTitleChange","event","target","value","handleBodyChange","handleFileUpload","console","log","files","handleSubmit","formData","FormData","append","file","body","title","data","courseId","tagList","id","headers","then","res","addPost","catch","err","handleTagChange","handleTypeChange","map","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axiosInstance from 'app/main/axios';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport * as Actions from '../../store/actions';\n\nconst useStyles = makeStyles(theme => ({\n  text: {\n    width: \"70ch\",\n  }\n}));\n\n\nexport default function ShareForm(props) {\n\n  const classes = useStyles();\n  const dispatch=useDispatch();\n  const course = useSelector(({ academyApp }) => academyApp.course);\n  const [open, setOpen] = React.useState(false);\n  const [attachOpen, setAttachOpen] = React.useState(false);\n  const [post, setPost] = React.useState({})\n  const [tag, setTag] = React.useState(0);\n  const [type , setType]  = React.useState(\"all\");\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n    \n  };\n  const handleAttachOpen = () => {\n    setAttachOpen(true);\n  };\n  const handleAttachClose = () => {\n    setAttachOpen(false);\n  };\n  const handleTitleChange = (event) => {\n    setPost({ ...post, 'title': event.target.value });\n  };\n  const handleBodyChange = (event) => {\n    setPost({ ...post, 'body': event.target.value });\n  };\n  function handleFileUpload(event) {\n    console.log(event.target.value);\n    setPost({ ...post, 'file': event.target.files[0] });\n    setAttachOpen(false);\n  }\n  function handleSubmit() \n  {\n    let formData = new FormData();\n    formData.append('file', post.file);\n    formData.append('body', post.body);\n    formData.append('title', post.title);\n    formData.append('courseId', props.data.courseId);\n    formData.append('tag',course.tagList[tag].id);\n    formData.append('postType' , type )\n    axiosInstance.post('post-in-class/', formData, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }\n    ).then((res) => {\n      console.log(res.data);\n      dispatch(Actions.addPost(res.data));\n    })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    handleAttachClose();\n    handleClose();\n  }\n  const handleTagChange = (event) => {\n    setTag(event.target.value);\n  }\n\n  const handleTypeChange = (event) => {\n    setType(event.target.value);\n  }\n\n\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"inherit\" onClick={handleClickOpen}>\n        Share or Announce Something\n      </Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Share / Announce Form </DialogTitle>\n        <DialogContent>\n\n          <TextField\n            autoFocus\n            id=\"name\"\n            label=\"title\"\n            margin=\"dense\"\n            type=\"text\"\n            variant=\"outlined\"\n            fullWidth\n            onChange={handleTitleChange}\n          />\n\n          <TextField\n            autoFocus\n            id=\"name\"\n            label=\"body\"\n            margin=\"dense\"\n            type=\"text\"\n            variant=\"outlined\"\n            fullWidth\n            multiline={true}\n            onChange={handleBodyChange}\n          />\n          <Select\n            labelId=\"demo-simple-select-label\"\n            id=\"demo-simple-select\"\n            onChange={handleTagChange}\n            value={tag}\n            required={true}\n          >\n          {course==null?null:course.tagList.map((item,index) => \n            <MenuItem value={index}>{item.tag}</MenuItem>\n          )}\n          </Select>\n\n          <br></br>\n          <Select\n            labelId=\"demo-simple-select-label\"\n            id=\"demo-simple-select\"\n            onChange={handleTypeChange}\n            value={type}\n            required={true}\n          > \n            <MenuItem value=\"all\">All</MenuItem>\n            <MenuItem value=\"material\">Material</MenuItem>\n            <MenuItem value=\"assignments\">Assignments</MenuItem>\n            <MenuItem value=\"exams\">Exams</MenuItem>\n            \n          \n          </Select>\n\n        </DialogContent>\n        <DialogActions>\n\n          <Button className=\"normal-case\" variant=\"outlined\" color=\"inherit\" onClick={handleAttachOpen}>\n            Attach\n          </Button>\n          <Dialog open={attachOpen} onClose={handleAttachClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Attach file</DialogTitle>\n            <DialogContent>\n              <form>\n                <input type=\"file\" onChange={handleFileUpload} />\n              </form>\n            </DialogContent>\n            <DialogActions>\n\n              <Button className=\"normal-case\" variant=\"outlined\" color=\"inherit\">\n                Attach\n            </Button>\n              <Button onClick={handleAttachClose} className=\"normal-case\" variant=\"outlined\" color=\"inherit\">\n                Discard\n            </Button>\n            </DialogActions>\n          </Dialog>\n          <Button onClick={handleClose} className=\"normal-case\" variant=\"outlined\" color=\"inherit\">\n            Discard\n          </Button>\n          <Button onClick={handleSubmit} variant=\"outlined\" color=\"inherit\">\n            Post\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}