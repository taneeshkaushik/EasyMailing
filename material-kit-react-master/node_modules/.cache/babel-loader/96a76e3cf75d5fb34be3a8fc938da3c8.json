{"ast":null,"code":"import _slicedToArray from \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/src/app/main/academy/crp/tabs/CourseDetails/Enrolments.js\";\nimport React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport PieChart from './PieChart';\nimport { ResponsivePie } from '@nivo/pie';\nimport axiosInstance from 'app/main/axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Button, Typography } from '@material-ui/core';\nimport CourseList from 'app/main/academy/crp/usables/CourseList';\nimport RequestList from '../PendingWork/RequestList';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      height: 400\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary\n    }\n  };\n});\nexport default function Enrolments(props) {\n  var classes = useStyles();\n\n  var _React$useState = React.useState([[{}]]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      pieDataStack = _React$useState2[0],\n      setPieDataStack = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      level = _React$useState4[0],\n      setLevel = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      enrolments = _React$useState6[0],\n      setEnrolments = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      dataList = _React$useState8[0],\n      setDataList = _React$useState8[1];\n\n  useEffect(function () {\n    axiosInstance.get('get-enrolments/', {\n      params: {\n        offeringId: 1\n      }\n    }).then(function (response) {\n      setEnrolments(response.data);\n      var list = [];\n\n      for (var i = 0; i < response.data.length; i++) {\n        var value = response.data[i];\n        list.push([i + 1, value.studentId__rollNum, \"\".concat(value.studentId_first_name, \" \").concat(value.studentId_last_name), value.enrolType, value.status]);\n      }\n\n      setDataList(list);\n    });\n  }, [props]);\n  var data = [{\n    \"id\": \"credit\",\n    \"label\": \"credit\",\n    \"value\": 50\n  }, {\n    \"id\": \"audit\",\n    \"label\": \"audit\",\n    \"value\": 30\n  }];\n  var data1 = [{\n    \"id\": \"undergraduate\",\n    \"label\": \"undergraduate\",\n    \"value\": 500\n  }, {\n    \"id\": \"masters\",\n    \"label\": \"masters\",\n    \"value\": 200\n  }, {\n    \"id\": \"phd\",\n    \"label\": \"phd\",\n    \"value\": 300\n  }];\n  var data2 = [{\n    \"id\": \"2018\",\n    \"label\": \"2018\",\n    \"value\": 500\n  }, {\n    \"id\": \"2019\",\n    \"label\": \"2019\",\n    \"value\": 200\n  }, {\n    \"id\": \"2020\",\n    \"label\": \"2020\",\n    \"value\": 300\n  }, {\n    \"id\": \"2021\",\n    \"label\": \"2021\",\n    \"value\": 200\n  }, {\n    \"id\": \"2022\",\n    \"label\": \"2022\",\n    \"value\": 300\n  }];\n  var data3 = [{\n    \"id\": \"CSE\",\n    \"label\": \"CSE\",\n    \"value\": 10\n  }, {\n    \"id\": \"EE\",\n    \"label\": \"EE\",\n    \"value\": 20\n  }, {\n    \"id\": \"ME\",\n    \"label\": \"ME\",\n    \"value\": 15\n  }, {\n    \"id\": \"Chemical\",\n    \"label\": \"Chemical\",\n    \"value\": 5\n  }];\n\n  function bucketer(matchParameters, basis) {\n    var matchings = Object.keys(matchParameters);\n    var seperatedData = {};\n\n    for (var i = 0; i < enrolments.length; i++) {\n      var flag = 1;\n\n      for (var j = 0; j < matchings.length; j++) {\n        if (enrolments[i].matchings[j] != matchParameters.matchings[j]) {\n          flag = 0;\n          break;\n        }\n\n        if (flag == 1) {\n          seperatedData[enrolments.basis] += 1;\n        }\n      }\n    }\n\n    return seperatedData;\n  }\n\n  var _React$useState9 = React.useState(data),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      pieData = _React$useState10[0],\n      setPieData = _React$useState10[1];\n\n  function pieDataMaker(labelDict) {\n    var newLabels = Object.keys(labelDict);\n    var newPieInput = [{}];\n\n    for (var i = 0; i < newLabels.length; i++) {\n      var slice = {\n        'id': newLabels[i],\n        'label': newLabels[i],\n        'value': labelDict[newLabels[i]]\n      };\n      newPieInput.push(slice);\n    }\n\n    setPieDataStack(pieDataStack.push(newPieInput));\n    setLevel(level + 1);\n  }\n\n  function sliceClicked(node, event) {\n    if (level == 0) {\n      setPieData(data1);\n      setLevel(level + 1);\n    }\n\n    if (level == 1) {\n      setPieData(data2);\n      setLevel(level + 1);\n    }\n\n    if (level == 2) {\n      setPieData(data3);\n      setLevel(level + 1);\n    } else return; // if(level==0)\n    // {\n    //   var labelDict=bucketer(node.id, 'batch')\n    //   pieDataMaker(labelDict)\n    // }\n    // else if(level==1)\n    // {\n    //   var labelDict=bucketer(node.id, 'department')\n    //   pieDataMaker(labelDict)\n    // }\n    // else if(level==2)\n    // {\n    //   return ;\n    // }\n\n  }\n\n  function back() {\n    if (level == 0) {\n      return;\n    }\n\n    if (level == 1) {\n      setPieData(data);\n      setLevel(level - 1);\n    }\n\n    if (level == 2) {\n      setPieData(data1);\n      setLevel(level - 1);\n    }\n\n    if (level == 3) {\n      setPieData(data2);\n      setLevel(level - 1);\n    } else return;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: back,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, React.createElement(ArrowBackIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }), \"Previous\"), React.createElement(Typography, {\n    style: {\n      textAlign: \"center\",\n      fontSize: 35,\n      color: \"red\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, \"Visualisation\"), React.createElement(ResponsivePie, {\n    data: pieData,\n    margin: {\n      top: 40,\n      right: 80,\n      bottom: 80,\n      left: 80\n    },\n    innerRadius: 0.5,\n    padAngle: 0.7,\n    cornerRadius: 3,\n    colors: {\n      scheme: 'nivo'\n    },\n    borderWidth: 1,\n    borderColor: {\n      from: 'color',\n      modifiers: [['darker', 0.2]]\n    },\n    radialLabelsSkipAngle: 10,\n    radialLabelsTextColor: \"#333333\",\n    radialLabelsLinkColor: {\n      from: 'color'\n    },\n    sliceLabelsSkipAngle: 10,\n    sliceLabelsTextColor: \"#333333\",\n    onClick: sliceClicked,\n    defs: [{\n      id: 'dots',\n      type: 'patternDots',\n      background: 'inherit',\n      color: 'rgba(255, 255, 255, 0.3)',\n      size: 4,\n      padding: 1,\n      stagger: true\n    }, {\n      id: 'lines',\n      type: 'patternLines',\n      background: 'inherit',\n      color: 'rgba(255, 255, 255, 0.3)',\n      rotation: -45,\n      lineWidth: 6,\n      spacing: 10\n    }],\n    fill: [{\n      match: {\n        id: 'ruby'\n      },\n      id: 'dots'\n    }, {\n      match: {\n        id: 'c'\n      },\n      id: 'dots'\n    }, {\n      match: {\n        id: 'go'\n      },\n      id: 'dots'\n    }, {\n      match: {\n        id: 'python'\n      },\n      id: 'dots'\n    }, {\n      match: {\n        id: 'scala'\n      },\n      id: 'lines'\n    }, {\n      match: {\n        id: 'lisp'\n      },\n      id: 'lines'\n    }, {\n      match: {\n        id: 'elixir'\n      },\n      id: 'lines'\n    }, {\n      match: {\n        id: 'javascript'\n      },\n      id: 'lines'\n    }],\n    legends: [{\n      anchor: 'bottom',\n      direction: 'row',\n      justify: false,\n      translateX: 0,\n      translateY: 56,\n      itemsSpacing: 0,\n      itemWidth: 100,\n      itemHeight: 18,\n      itemTextColor: '#999',\n      itemDirection: 'left-to-right',\n      itemOpacity: 1,\n      symbolSize: 18,\n      symbolShape: 'circle',\n      effects: [{\n        on: 'hover',\n        style: {\n          itemTextColor: '#000'\n        }\n      }]\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }), React.createElement(RequestList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/src/app/main/academy/crp/tabs/CourseDetails/Enrolments.js"],"names":["React","useEffect","makeStyles","Paper","Grid","PieChart","ResponsivePie","axiosInstance","ArrowBackIcon","Button","Typography","CourseList","RequestList","useStyles","theme","root","flexGrow","height","paper","padding","spacing","textAlign","color","palette","text","secondary","Enrolments","props","classes","useState","pieDataStack","setPieDataStack","level","setLevel","enrolments","setEnrolments","dataList","setDataList","get","params","offeringId","then","response","data","list","i","length","value","push","studentId__rollNum","studentId_first_name","studentId_last_name","enrolType","status","data1","data2","data3","bucketer","matchParameters","basis","matchings","Object","keys","seperatedData","flag","j","pieData","setPieData","pieDataMaker","labelDict","newLabels","newPieInput","slice","sliceClicked","node","event","back","fontSize","top","right","bottom","left","scheme","from","modifiers","id","type","background","size","stagger","rotation","lineWidth","match","anchor","direction","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemTextColor","itemDirection","itemOpacity","symbolSize","symbolShape","effects","on","style"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport PieChart from './PieChart'\nimport { ResponsivePie } from '@nivo/pie'\nimport axiosInstance from 'app/main/axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Button, Typography } from '@material-ui/core'\nimport CourseList from 'app/main/academy/crp/usables/CourseList'\nimport RequestList from '../PendingWork/RequestList';\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    height: 400\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\n\nexport default function Enrolments(props) {\n  const classes = useStyles();\n  const [pieDataStack, setPieDataStack] = React.useState([[{}]]);\n  const [level, setLevel] = React.useState(0);\n  const [enrolments, setEnrolments] = React.useState(null);\n  const [dataList, setDataList] = React.useState(null);\n  useEffect(() => {\n    axiosInstance.get('get-enrolments/', {\n      params: {\n        offeringId: 1\n      }\n    }).then((response) => {\n      setEnrolments(response.data);\n      const list = []\n      for (var i = 0; i < response.data.length; i++) {\n        var value = response.data[i];\n        list.push(\n          [i + 1,\n          value.studentId__rollNum,\n          `${value.studentId_first_name} ${value.studentId_last_name}`,\n          value.enrolType,\n          value.status\n          ]\n        )\n      }\n      setDataList(list);\n    });\n  }, [props]);\n\n  const data = [\n    {\n      \"id\": \"credit\",\n      \"label\": \"credit\",\n      \"value\": 50,\n    },\n    {\n      \"id\": \"audit\",\n      \"label\": \"audit\",\n      \"value\": 30,\n\n    }\n  ]\n  const data1 = [\n    {\n      \"id\": \"undergraduate\",\n      \"label\": \"undergraduate\",\n      \"value\": 500,\n    },\n    {\n      \"id\": \"masters\",\n      \"label\": \"masters\",\n      \"value\": 200,\n\n    },\n    {\n      \"id\": \"phd\",\n      \"label\": \"phd\",\n      \"value\": 300,\n\n    },\n  ]\n\n  const data2 = [\n    {\n      \"id\": \"2018\",\n      \"label\": \"2018\",\n      \"value\": 500,\n    },\n    {\n      \"id\": \"2019\",\n      \"label\": \"2019\",\n      \"value\": 200,\n\n    },\n    {\n      \"id\": \"2020\",\n      \"label\": \"2020\",\n      \"value\": 300,\n\n    },\n    {\n      \"id\": \"2021\",\n      \"label\": \"2021\",\n      \"value\": 200,\n\n    },\n    {\n      \"id\": \"2022\",\n      \"label\": \"2022\",\n      \"value\": 300,\n\n    },\n  ]\n  const data3 = [\n    {\n      \"id\": \"CSE\",\n      \"label\": \"CSE\",\n      \"value\": 10,\n    },\n    {\n      \"id\": \"EE\",\n      \"label\": \"EE\",\n      \"value\": 20,\n\n    },\n    {\n      \"id\": \"ME\",\n      \"label\": \"ME\",\n      \"value\": 15,\n\n    },\n    {\n      \"id\": \"Chemical\",\n      \"label\": \"Chemical\",\n      \"value\": 5,\n\n    }\n  ]\n\n  function bucketer(matchParameters, basis) {\n    const matchings = Object.keys(matchParameters)\n    var seperatedData = {}\n    for (var i = 0; i < enrolments.length; i++) {\n      var flag = 1;\n      for (var j = 0; j < matchings.length; j++) {\n        if (enrolments[i].matchings[j] != matchParameters.matchings[j]) {\n          flag = 0;\n          break;\n        }\n        if (flag == 1) {\n          seperatedData[enrolments.basis] += 1;\n        }\n\n      }\n    }\n    return seperatedData\n\n  }\n\n  const [pieData, setPieData] = React.useState(data);\n  function pieDataMaker(labelDict) {\n    var newLabels = Object.keys(labelDict)\n    var newPieInput = [{}]\n    for (var i = 0; i < newLabels.length; i++) {\n      var slice = {\n        'id': newLabels[i],\n        'label': newLabels[i],\n        'value': labelDict[newLabels[i]]\n      }\n      newPieInput.push(slice);\n    }\n    setPieDataStack(pieDataStack.push(newPieInput));\n    setLevel(level + 1);\n  }\n\n\n  function sliceClicked(node, event) {\n    if (level == 0) {\n      setPieData(data1);\n      setLevel(level + 1);\n    }\n    if (level == 1) {\n      setPieData(data2);\n      setLevel(level + 1);\n    }\n    if (level == 2) {\n      setPieData(data3);\n      setLevel(level + 1);\n    }\n\n    else return;\n\n\n    // if(level==0)\n    // {\n    //   var labelDict=bucketer(node.id, 'batch')\n    //   pieDataMaker(labelDict)\n    // }\n    // else if(level==1)\n    // {\n    //   var labelDict=bucketer(node.id, 'department')\n    //   pieDataMaker(labelDict)\n    // }\n    // else if(level==2)\n    // {\n    //   return ;\n    // }\n  }\n\n  function back() {\n    if (level == 0) {\n      return;\n    }\n    if (level == 1) {\n      setPieData(data);\n      setLevel(level - 1);\n    }\n    if (level == 2) {\n      setPieData(data1);\n      setLevel(level - 1);\n    }\n    if (level == 3) {\n      setPieData(data2)\n      setLevel(level - 1);\n    }\n\n    else return;\n\n  }\n  return (\n    <div className={classes.root}>\n     \n      <Button onClick={back}>\n        <ArrowBackIcon></ArrowBackIcon>Previous\n      </Button>\n      <Typography style={{textAlign:\"center\" , fontSize:35 , color:\"red\"}}>Visualisation</Typography>\n      <ResponsivePie\n        data={pieData}\n        margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\n        innerRadius={0.5}\n        padAngle={0.7}\n        cornerRadius={3}\n        colors={{ scheme: 'nivo' }}\n        borderWidth={1}\n        borderColor={{ from: 'color', modifiers: [['darker', 0.2]] }}\n        radialLabelsSkipAngle={10}\n        radialLabelsTextColor=\"#333333\"\n        radialLabelsLinkColor={{ from: 'color' }}\n        \n        sliceLabelsSkipAngle={10}\n        sliceLabelsTextColor=\"#333333\"\n        onClick={sliceClicked}\n        defs={[\n          {\n            id: 'dots',\n            type: 'patternDots',\n            background: 'inherit',\n            color: 'rgba(255, 255, 255, 0.3)',\n            size: 4,\n            padding: 1,\n            stagger: true\n          },\n          {\n            id: 'lines',\n            type: 'patternLines',\n            background: 'inherit',\n            color: 'rgba(255, 255, 255, 0.3)',\n            rotation: -45,\n            lineWidth: 6,\n            spacing: 10\n          }\n        ]}\n        fill={[\n          {\n            match: {\n              id: 'ruby'\n            },\n            id: 'dots'\n          },\n          {\n            match: {\n              id: 'c'\n            },\n            id: 'dots'\n          },\n          {\n            match: {\n              id: 'go'\n            },\n            id: 'dots'\n          },\n          {\n            match: {\n              id: 'python'\n            },\n            id: 'dots'\n          },\n          {\n            match: {\n              id: 'scala'\n            },\n            id: 'lines'\n          },\n          {\n            match: {\n              id: 'lisp'\n            },\n            id: 'lines'\n          },\n          {\n            match: {\n              id: 'elixir'\n            },\n            id: 'lines'\n          },\n          {\n            match: {\n              id: 'javascript'\n            },\n            id: 'lines'\n          }\n        ]}\n        legends={[\n          {\n            anchor: 'bottom',\n            direction: 'row',\n            justify: false,\n            translateX: 0,\n            translateY: 56,\n            itemsSpacing: 0,\n            itemWidth: 100,\n            itemHeight: 18,\n            itemTextColor: '#999',\n            itemDirection: 'left-to-right',\n            itemOpacity: 1,\n            symbolSize: 18,\n            symbolShape: 'circle',\n            effects: [\n              {\n                on: 'hover',\n                style: {\n                  itemTextColor: '#000'\n                }\n              }\n            ]\n          }\n        ]}\n      />\n      \n      <RequestList />\n      {/* {dataList != null ? <CourseList data={dataList} columns={['S.no', 'Roll No', 'Name', 'Type', 'Status']} /> : null} */}\n      \n      \n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}