{"ast":null,"code":"import _regeneratorRuntime from \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/src/app/main/academy/crp/usables/Upload.js\";\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState, useRef } from 'react';\nimport { readString } from 'react-papaparse';\nimport CourseList from '../usables/CourseList';\nimport axios from 'axios';\nimport { gapi } from 'gapi-script';\nimport { encode, decode } from 'js-base64';\nimport TextField from '@material-ui/core/TextField';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    button: {\n      margin: theme.spacing(1)\n    },\n    input: {\n      display: 'none'\n    }\n  };\n});\nexport default function Upload(props) {\n  var classes = useStyles();\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      fileState = _React$useState2[0],\n      setFileState = _React$useState2[1];\n\n  var onFileChange = function onFileChange(event) {\n    setFileState({\n      selectedFile: event.target.files[0]\n    });\n    console.log(event.target.result);\n    var reader = new FileReader();\n\n    reader.onload =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var text, row_temp, col_setup, row_setup, i, temp, j;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                text = event.target.result;\n                console.log(text);\n                row_temp = readString(text).data;\n                console.log(row_temp);\n                col_setup = [];\n                row_setup = [];\n\n                for (i = 0; i < row_temp[0].length; i++) {\n                  col_setup.push({\n                    Header: row_temp[0][i],\n                    accessor: row_temp[0][i],\n                    sortable: true,\n                    className: \"font-bold justify-center\"\n                  });\n                }\n\n                console.log(col_setup);\n\n                for (i = 1; i < row_temp.length && row_temp[i].length > 1; i++) {\n                  temp = {};\n\n                  for (j = 0; j < row_temp[i].length; j++) {\n                    temp[row_temp[0][j]] = row_temp[i][j];\n                  }\n\n                  row_setup.push(temp);\n                }\n\n                console.log(row_setup);\n                props.setColumns(col_setup);\n                props.setRows(row_setup);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    reader.readAsText(event.target.files[0]);\n  };\n\n  var onFileUpload = function onFileUpload() {\n    var formData = new FormData();\n    console.log(fileState);\n    formData.append(\"file\", fileState);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    color: \"inherit\",\n    type: \"file\",\n    onChange: onFileChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"outlined-button-file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"inherit\",\n    component: \"span\",\n    className: classes.button,\n    onClick: onFileUpload,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Upload\")));\n}","map":{"version":3,"sources":["/home/abhishek/Projects/stp/frotend/Fuse-React-v3.0.0-skeleton/src/app/main/academy/crp/usables/Upload.js"],"names":["Button","makeStyles","React","useEffect","useState","useRef","readString","CourseList","axios","gapi","encode","decode","TextField","useStyles","theme","button","margin","spacing","input","display","Upload","props","classes","fileState","setFileState","onFileChange","event","selectedFile","target","files","console","log","result","reader","FileReader","onload","text","row_temp","data","col_setup","row_setup","i","length","push","Header","accessor","sortable","className","temp","j","setColumns","setRows","readAsText","onFileUpload","formData","FormData","append"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState, useRef } from 'react';\nimport { readString } from 'react-papaparse';\nimport CourseList from '../usables/CourseList'\nimport axios from 'axios';\nimport { gapi } from 'gapi-script';\nimport { encode, decode } from 'js-base64';\nimport TextField from '@material-ui/core/TextField';\n\nconst useStyles = makeStyles(theme => ({\n    button: {\n        margin: theme.spacing(1),\n    },\n    input: {\n        display: 'none',\n    },\n}));\nexport default function Upload(props) {\n    const classes = useStyles();\n    const [fileState, setFileState] = React.useState({});\n    const onFileChange = (event) => {\n        setFileState({ selectedFile: event.target.files[0] });\n        console.log(event.target.result);\n        const reader = new FileReader()\n        reader.onload = async (event) => {\n            const text = (event.target.result)\n            console.log(text);\n            var row_temp = readString(text).data;\n            console.log(row_temp);\n            var col_setup = [];\n            var row_setup = [];\n            for (var i = 0; i < row_temp[0].length; i++) {\n                col_setup.push({\n                    Header: row_temp[0][i],\n                    accessor: row_temp[0][i],\n                    sortable: true,\n                    className: \"font-bold justify-center\",\n                });\n            }\n            console.log(col_setup);\n            for (var i = 1; i < row_temp.length && row_temp[i].length > 1; i++) {\n                var temp = {};\n                for (var j = 0; j < row_temp[i].length; j++) {\n                    temp[row_temp[0][j]] = row_temp[i][j];\n                }\n                row_setup.push(temp);\n            }\n            console.log(row_setup);\n            props.setColumns(col_setup);\n            props.setRows(row_setup);\n        };\n        reader.readAsText(event.target.files[0])\n    }\n    const onFileUpload = () => {\n        const formData = new FormData();\n        console.log(fileState);\n        formData.append(\"file\", fileState);\n    }\n    return (\n        <div>\n            <input color=\"inherit\" type=\"file\" onChange={onFileChange} />\n            <label htmlFor=\"outlined-button-file\">\n                <Button variant=\"outlined\" color=\"inherit\" component=\"span\" className={classes.button} onClick={onFileUpload}>\n                    Upload\n        </Button>\n\n\n            </label>\n            {/* {rows != null && columns != null ? <CourseList columns={columns} data={rows} /> : null} */}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}