{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1088:function(e,a,t){\"use strict\";t.r(a);var r=t(0),n=t.n(r),o=t(98),s=t(661),l=t(694),i=t(238),c=t(42),m=t(26),d=t(3),u=t(8),p=t(17),f=t(76),h=t.n(f),v=t(648),E=t(649),b=t(652),x=t(671),w=t(27),g=t(5),N=t(680);var k=function(e){var a,t=Object(g.b)(),o=Object(g.c)(function(e){return e.auth.register}),s=Object(r.useState)(!1),l=Object(p.a)(s,2),i=l[0],m=l[1],d=Object(r.useRef)(null);function f(){m(!1)}return Object(r.useEffect)(function(){o.error&&(o.error.username||o.error.password||o.error.email)&&(d.current.updateInputsWithError(Object(u.a)({},o.error)),f())},[o.error]),n.a.createElement(\"div\",{className:\"w-full\"},n.a.createElement(h.a,{onValidSubmit:function(e){console.log(e),t(w.k(e))},onValid:function(){m(!0)},onInvalid:f,ref:d,className:\"flex flex-col justify-center w-full\"},n.a.createElement(c.x,{className:\"mb-16\",type:\"text\",name:\"username\",label:\"username\",onChange:function(e){return void 0!=e&&(e.length>=6&&a!=e?(a=e,new Promise(function(e,t){N.a.get(\"/check-username/\"+a+\"/\").then(function(a){a.data.response?e(!0):t(a.data.error)})})):void(a=e))},validations:{minLength:3},validationErrors:{minLength:\"Min character length is 6\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"person\"))},variant:\"outlined\",required:!0}),n.a.createElement(c.x,{className:\"mb-16\",type:\"text\",name:\"first_name\",label:\"First Name\",validations:\"isAlpha\",validationErrors:{isAlpha:\"Only characters are allowed\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"person\"))},variant:\"outlined\",required:!0}),n.a.createElement(c.x,{className:\"mb-16\",type:\"text\",name:\"last_name\",label:\"Last Name\",validations:\"isAlpha\",validationErrors:{isAlpha:\"Only characters are allowed\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"person\"))},variant:\"outlined\"}),n.a.createElement(c.w,{className:\"my-16\",name:\"is_staff\",label:\"Role\",value:!1,variant:\"outlined\"},n.a.createElement(b.a,{value:!1},\"Student\"),n.a.createElement(b.a,{value:!0},\"Teacher\")),n.a.createElement(c.x,{className:\"mb-16\",type:\"text\",name:\"email\",label:\"Email\",validations:\"isEmail\",validationErrors:{isEmail:\"Please enter a valid email\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"email\"))},variant:\"outlined\",required:!0}),n.a.createElement(c.x,{className:\"mb-16\",type:\"password\",name:\"password\",label:\"Password\",validations:\"equalsField:password-confirm\",validationErrors:{equalsField:\"Passwords do not match\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"vpn_key\"))},variant:\"outlined\",required:!0}),n.a.createElement(c.x,{className:\"mb-16\",type:\"password\",name:\"password-confirm\",label:\"Confirm Password\",validations:\"equalsField:password\",validationErrors:{equalsField:\"Passwords do not match\"},InputProps:{endAdornment:n.a.createElement(v.a,{position:\"end\"},n.a.createElement(E.a,{className:\"text-20\",color:\"action\"},\"vpn_key\"))},variant:\"outlined\",required:!0}),n.a.createElement(x.a,{type:\"submit\",variant:\"contained\",color:\"primary\",className:\"w-full mx-auto mt-16 normal-case\",\"aria-label\":\"REGISTER\",disabled:!i,value:\"legacy\"},\"Register\")))},y=t(674),j=t(138),A=t(56),O=Object(y.a)(function(e){return{root:{background:\"linear-gradient(to right, \"+e.palette.primary.dark+\" 0%, \"+Object(i.darken)(e.palette.primary.dark,.5)+\" 100%)\",color:e.palette.primary.contrastText}}});a.default=function(){var e=O();return j.a.isAuthTokenValid()?n.a.createElement(A.a,{to:\"/login\"}):n.a.createElement(\"div\",{className:Object(d.a)(e.root,\"flex flex-col flex-1 flex-shrink-0 p-24 md:flex-row md:p-0\")},n.a.createElement(\"div\",{className:\"flex flex-col flex-grow-0 items-center text-white p-16 text-center md:p-128 md:items-start md:flex-shrink-0 md:flex-1 md:text-left\"},n.a.createElement(c.b,{animation:\"transition.expandIn\"},n.a.createElement(\"img\",{className:\"w-128 mb-32\",src:\"assets/images/logos/fuse.svg\",alt:\"logo\"})),n.a.createElement(c.b,{animation:\"transition.slideUpIn\",delay:300},n.a.createElement(o.a,{variant:\"h3\",color:\"inherit\",className:\"font-light\"},\"Welcome to the FUSE!\")),n.a.createElement(c.b,{delay:400},n.a.createElement(o.a,{variant:\"subtitle1\",color:\"inherit\",className:\"max-w-512 mt-16\"},\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ullamcorper nisl erat, vel convallis elit fermentum pellentesque. Sed mollis velit facilisis facilisis.\"))),n.a.createElement(c.b,{animation:{translateX:[0,\"100%\"]}},n.a.createElement(s.a,{className:\"w-full max-w-400 mx-auto m-16 md:m-0\",square:!0},n.a.createElement(l.a,{className:\"flex flex-col items-center justify-center p-32 md:p-48 md:pt-128 \"},n.a.createElement(o.a,{variant:\"h6\",className:\"md:w-full mb-32\"},\"CREATE AN ACCOUNT\"),n.a.createElement(k,null),n.a.createElement(\"div\",{className:\"flex flex-col items-center justify-center pt-32 pb-24\"},n.a.createElement(\"span\",{className:\"font-medium\"},\"Already have an account?\"),n.a.createElement(m.a,{className:\"font-medium\",to:\"/login\"},\"Login\")),n.a.createElement(\"div\",{className:\"flex flex-col items-center\"})))))}},680:function(e,a,t){\"use strict\";var r=t(65),n=t.n(r),o=t(122),s=t(137),l=\"https://serene-fjord-22896.herokuapp.com/api/\",i=t.n(s).a.create({baseURL:l,timeout:5e3,headers:{Authorization:localStorage.getItem(\"access_token\")?\"Bearer \"+localStorage.getItem(\"access_token\"):null,\"Content-Type\":\"application/json\",accept:\"application/json\"}});i.interceptors.response.use(function(e){return e},function(){var e=Object(o.a)(n.a.mark(function e(a){var t,r,o,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.config,\"undefined\"!==typeof a.response){e.next=4;break}return alert(\"A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly.\"),e.abrupt(\"return\",Promise.reject(a));case 4:if(401!==a.response.status||t.url!==l+\"token/refresh/\"){e.next=7;break}return window.location.href=\"/login/\",e.abrupt(\"return\",Promise.reject(a));case 7:if(\"token_not_valid\"!==a.response.data.code||401!==a.response.status||\"Unauthorized\"!==a.response.statusText){e.next=23;break}if(!(r=localStorage.getItem(\"refresh_token\"))){e.next=21;break}if(o=JSON.parse(atob(r.split(\".\")[1])),s=Math.ceil(Date.now()/1e3),console.log(o.exp),!(o.exp>s)){e.next=17;break}return e.abrupt(\"return\",i.post(\"/token/refresh/\",{refresh:r}).then(function(e){return localStorage.setItem(\"access_token\",e.data.access),localStorage.setItem(\"refresh_token\",e.data.refresh),i.defaults.headers.Authorization=\"Bearer \"+e.data.access,t.headers.Authorization=\"Bearer \"+e.data.access,i(t)}).catch(function(e){console.log(e)}));case 17:console.log(\"Refresh token is expired\",o.exp,s),window.location.href=\"/login/\";case 19:e.next=23;break;case 21:console.log(\"Refresh token not available.\"),window.location.href=\"/login/\";case 23:return e.abrupt(\"return\",Promise.reject(a));case 24:case\"end\":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()),a.a=i},694:function(e,a,t){\"use strict\";var r=t(2),n=t.n(r),o=t(4),s=t.n(o),l=t(0),i=t.n(l),c=(t(1),t(3)),m=t(6),d=i.a.forwardRef(function(e,a){var t=e.classes,r=e.className,o=e.component,l=void 0===o?\"div\":o,m=s()(e,[\"classes\",\"className\",\"component\"]);return i.a.createElement(l,n()({className:Object(c.a)(t.root,r),ref:a},m))});a.a=Object(m.a)({root:{padding:16,\"&:last-child\":{paddingBottom:24}}},{name:\"MuiCardContent\"})(d)}}]);","extractedComments":[]}