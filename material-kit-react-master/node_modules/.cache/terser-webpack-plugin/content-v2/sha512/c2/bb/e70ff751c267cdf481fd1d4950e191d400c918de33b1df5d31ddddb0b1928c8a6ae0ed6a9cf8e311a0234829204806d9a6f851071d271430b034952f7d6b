{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1085:function(e,a,t){\"use strict\";t.r(a);var n=t(17),r=t(21),l=t(0),o=t.n(l),c=t(598),i=t(98),s=t(671),m=t(674),u=t(42),d=t(747),f=t(680),p=t(668),h=t(792),E=t(791),b=t(716);function g(e){var a;return o.a.createElement(p.a,{open:e.dialogOpen},o.a.createElement(E.a,{color:\"primary\"},o.a.createElement(b.a,{initialValue:\"<p>This is the initial content of the editor</p>\",init:{height:500,menubar:!0,plugins:[\"advlist autolink lists link image charmap print preview anchor\",\"searchreplace visualblocks code fullscreen\",\"insertdatetime media table paste code help wordcount\"],toolbar:\"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | help\"},onEditorChange:function(e,t){a=e}})),o.a.createElement(h.a,null,o.a.createElement(s.a,{onClick:function(){e.setDialogOpen(!1)},color:\"secondary\"},\"Cancel\"),o.a.createElement(s.a,{onClick:function(){f.a.post(\"post-create/\",{body:a}).then(function(e){alert(\"posted\")}).catch(function(e){alert(e)}),e.setDialogOpen(!1)},color:\"secondary\"},\"Post\")))}var k=t(138),v=t(56),x=t(666);function N(e){var a;return o.a.createElement(p.a,{open:e.questionDialogOpen},o.a.createElement(E.a,{color:\"primary\"},o.a.createElement(x.a,{onChange:function(e){a=e.target.value}})),o.a.createElement(h.a,null,o.a.createElement(s.a,{onClick:function(){e.setQuestionDialogOpen(!1)},color:\"secondary\"},\"Cancel\"),o.a.createElement(s.a,{onClick:function(){f.a.post(\"post-question/\",{content:a}).then(function(e){alert(e.data)}).catch(function(e){alert(e)}),e.setQuestionDialogOpen(!1)},color:\"secondary\"},\"Ask\")))}var y=Object(m.a)(function(e){return{layoutHeader:Object(r.a)({height:200,minHeight:200},e.breakpoints.down(\"md\"),{height:140,minHeight:140})}});a.default=function(){var e=y(),a=o.a.useState([]),t=Object(n.a)(a,2),r=t[0],l=t[1],m=o.a.useState(!1),p=Object(n.a)(m,2),h=p[0],E=p[1];h||(E(!0),f.a.get(\"post-list/\").then(function(e){return e.data}).then(function(e){l(e)}));var b=o.a.useState(!1),x=Object(n.a)(b,2),w=x[0],C=x[1],O=o.a.useState(!1),j=Object(n.a)(O,2),S=j[0],I=j[1];return k.a.isAuthTokenValid()?o.a.createElement(u.m,{classes:{header:e.layoutHeader,toolbar:\"px-16 sm:px-24\"},header:o.a.createElement(\"div\",{className:\"p-24 flex flex-1 flex-col items-center justify-center md:flex-row md:items-end\"},o.a.createElement(\"div\",{className:\"flex flex-1 flex-col items-center justify-center md:flex-row md:items-center md:justify-start\"},o.a.createElement(u.b,{animation:\"transition.expandIn\",delay:300},o.a.createElement(c.a,{className:\"w-96 h-96\",src:\"assets/images/avatars/Velazquez.jpg\"})),o.a.createElement(u.b,{animation:\"transition.slideLeftIn\",delay:300},o.a.createElement(i.a,{className:\"md:ml-24\",variant:\"h4\",color:\"inherit\"},\"John Doe\"))),o.a.createElement(\"div\",{className:\"flex items-center justify-end\"},o.a.createElement(s.a,{className:\"mr-8 normal-case\",onClick:function(){I(!0)},variant:\"contained\",color:\"secondary\",\"aria-label\":\"Ask Question\"},\"Ask Question\"),o.a.createElement(s.a,{className:\"normal-case\",onClick:function(){C(!0)},variant:\"contained\",color:\"primary\",\"aria-label\":\"Create Post\"},\"Create Post\")),o.a.createElement(g,{dialogOpen:w,setDialogOpen:C.bind(this)}),o.a.createElement(N,{questionDialogOpen:S,setQuestionDialogOpen:I.bind(this)})),content:o.a.createElement(\"div\",{className:\"p-16 sm:p-24\"},o.a.createElement(\"div\",{className:\"md:flex max-w-2xl\"},o.a.createElement(\"div\",{className:\"flex flex-col flex-1 md:pr-32\"},r.map(function(e){return o.a.createElement(d.a,{item:e})}))))}):o.a.createElement(v.a,{to:\"/login\"})}},680:function(e,a,t){\"use strict\";var n=t(65),r=t.n(n),l=t(122),o=t(137),c=\"https://serene-fjord-22896.herokuapp.com/api/\",i=t.n(o).a.create({baseURL:c,timeout:5e3,headers:{Authorization:localStorage.getItem(\"access_token\")?\"Bearer \"+localStorage.getItem(\"access_token\"):null,\"Content-Type\":\"application/json\",accept:\"application/json\"}});i.interceptors.response.use(function(e){return e},function(){var e=Object(l.a)(r.a.mark(function e(a){var t,n,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.config,\"undefined\"!==typeof a.response){e.next=4;break}return alert(\"A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly.\"),e.abrupt(\"return\",Promise.reject(a));case 4:if(401!==a.response.status||t.url!==c+\"token/refresh/\"){e.next=7;break}return window.location.href=\"/login/\",e.abrupt(\"return\",Promise.reject(a));case 7:if(\"token_not_valid\"!==a.response.data.code||401!==a.response.status||\"Unauthorized\"!==a.response.statusText){e.next=23;break}if(!(n=localStorage.getItem(\"refresh_token\"))){e.next=21;break}if(l=JSON.parse(atob(n.split(\".\")[1])),o=Math.ceil(Date.now()/1e3),console.log(l.exp),!(l.exp>o)){e.next=17;break}return e.abrupt(\"return\",i.post(\"/token/refresh/\",{refresh:n}).then(function(e){return localStorage.setItem(\"access_token\",e.data.access),localStorage.setItem(\"refresh_token\",e.data.refresh),i.defaults.headers.Authorization=\"Bearer \"+e.data.access,t.headers.Authorization=\"Bearer \"+e.data.access,i(t)}).catch(function(e){console.log(e)}));case 17:console.log(\"Refresh token is expired\",l.exp,o),window.location.href=\"/login/\";case 19:e.next=23;break;case 21:console.log(\"Refresh token not available.\"),window.location.href=\"/login/\";case 23:return e.abrupt(\"return\",Promise.reject(a));case 24:case\"end\":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()),a.a=i},702:function(e,a,t){\"use strict\";t.d(a,\"a\",function(){return m});var n=t(0),r=t.n(n),l=t(602),o=t(671),c=t(680),i=t(598),s=t(121);function m(e){var a;return r.a.createElement(\"div\",{className:\"flex flex-auto\"},r.a.createElement(i.a,{src:\"assets/images/avatars/profile.jpg\"}),r.a.createElement(\"div\",{className:\"flex-1 pl-8\"},r.a.createElement(s.a,{elevation:0,className:\"w-full mb-16\"},r.a.createElement(l.a,{onChange:function(e){a=e.target.value},className:\"p-8 w-full border-1\",classes:{root:\"text-13\"},placeholder:\"Add a comment..\",multiline:!0,rows:\"1\",margin:\"none\",disableUnderline:!0})),r.a.createElement(o.a,{onClick:function(){c.a.post(\"comment-create/\",{postId:e.postId,parentCommentId:e.parentCommentId,body:a}).then(function(e){}).catch(function(e){alert(e)}),e.setComment(!e.comment)},className:\"normal-case\",variant:\"contained\",color:\"primary\",size:\"small\"},\"Post Comment\")))}},722:function(e,a,t){\"use strict\";t.d(a,\"a\",function(){return g});var n=t(17),r=t(0),l=t.n(r),o=t(606),c=t(598),i=t(655),s=t(98),m=t(662),u=t(671),d=t(649),f=t(651),p=t(680),h=t(789),E=t(656),b=t(702);function g(e){var a=l.a.useState([]),t=Object(n.a)(a,2),r=t[0],k=t[1],v=l.a.useState(!1),x=Object(n.a)(v,2),N=x[0],y=x[1];function w(){p.a.get(\"reply-list/\"+e.item.id).then(function(e){return e.data}).then(function(e){k(e),y(!N)})}return l.a.createElement(\"div\",null,l.a.createElement(o.a,{className:\"px-0\"},l.a.createElement(c.a,{alt:e.item.username[0].toUpperCase(),className:\"mr-16\"}),l.a.createElement(i.a,{primary:l.a.createElement(\"div\",null,l.a.createElement(s.a,{className:\"inline font-medium\",color:\"initial\",paragraph:!1},e.item.username),l.a.createElement(s.a,{className:\"inline ml-4\",variant:\"caption\"},e.item.creation_date)),secondary:e.item.body})),l.a.createElement(m.a,{className:\"card-footer flex flex-column p-16\",position:\"static\",color:\"default\",elevation:0},l.a.createElement(\"div\",{className:\"flex items-center\"},l.a.createElement(u.a,{onClick:function(){0==N?w():y(!N)}},l.a.createElement(s.a,null,\"Replies\"),l.a.createElement(d.a,{className:\"text-16 ml-4\",color:\"action\"},\"keyboard_arrow_down\"))),l.a.createElement(E.a,{in:N,timeout:\"auto\",unmountOnExit:!0},l.a.createElement(h.a,null,l.a.createElement(b.a,{comment:N,setComment:y.bind(this),postId:e.item.postId,parentCommentId:e.item.id}),r.length>0?l.a.createElement(f.a,null,r.map(function(e){return l.a.createElement(g,{item:e})})):null))))}},747:function(e,a,t){\"use strict\";t.d(a,\"a\",function(){return w});var n=t(17),r=t(21),l=t(0),o=t.n(l),c=t(674),i=t(661),s=t(859),m=t(598),u=t(603),d=t(649),f=t(694),p=t(721),h=t(671),E=t(98),b=t(662),g=t(651),k=t(680),v=t(656),x=t(702),N=t(722),y=Object(c.a)(function(e){return{layoutHeader:Object(r.a)({height:200,minHeight:200},e.breakpoints.down(\"md\"),{height:140,minHeight:140}),card:{minHeight:200}}});function w(e){var a=y(),t=o.a.useState(0!=e.item.isLiked),r=Object(n.a)(t,2),l=r[0],c=r[1],w=o.a.useState(0!=e.item.isDisliked),C=Object(n.a)(w,2),O=C[0],j=C[1],S=o.a.useState(e.item.doesFollow),I=Object(n.a)(S,2),_=I[0],D=I[1],A=o.a.useState([]),z=Object(n.a)(A,2),H=z[0],L=z[1],P=o.a.useState(!1),R=Object(n.a)(P,2),Q=R[0],T=R[1];function U(){k.a.get(\"post-comment-list/\"+e.item.id).then(function(e){return e.data}).then(function(e){L(e),T(!Q)})}return o.a.createElement(\"div\",null,o.a.createElement(i.a,{key:e.item.id,className:a.card+\" mb-32 overflow-hidden\"},o.a.createElement(s.a,{avatar:o.a.createElement(m.a,{\"aria-label\":\"Recipe\",alt:e.item.posterName[0].toUpperCase()}),action:o.a.createElement(u.a,{\"aria-label\":\"more\"},o.a.createElement(d.a,null,\"more_vert\")),title:e.item.title,subheader:e.item.posterName}),o.a.createElement(f.a,{className:\"py-0\"},o.a.createElement(\"div\",{dangerouslySetInnerHTML:{__html:e.item.body}})),o.a.createElement(p.a,{disableSpacing:!0},o.a.createElement(h.a,{onClick:function(){1!=O&&(l?k.a.post(\"like-unclicked/\",{postId:e.item.id}).then(function(e){}).catch(function(e){alert(e)}):k.a.post(\"like-clicked/\",{postId:e.item.id}).then(function(e){}).catch(function(e){alert(e)}),c(!l))},color:l?\"secondary\":\"primary\",size:\"small\",\"aria-label\":\"Like\"},o.a.createElement(d.a,{className:\"text-16 mr-8\"},\"thumb_up\"),o.a.createElement(E.a,{className:\"normal-case\"},\"Like\"),o.a.createElement(E.a,{className:\"normal-case ml-4\"},\"(\",e.item.likes,\")\")),o.a.createElement(h.a,{onClick:function(){1!=l&&(O?k.a.post(\"dislike-unclicked/\",{postId:e.item.id}).then(function(e){}).catch(function(e){alert(e)}):k.a.post(\"dislike-clicked/\",{postId:e.item.id}).then(function(e){}).catch(function(e){alert(e)}),j(!O))},color:O?\"secondary\":\"primary\",size:\"small\",\"aria-label\":\"Dislike\"},o.a.createElement(d.a,{className:\"text-16 mr-8\"},\"thumb_down\"),o.a.createElement(E.a,{className:\"normal-case\"},\"Dislike\"),o.a.createElement(E.a,{className:\"normal-case ml-4\"},\"(\",e.item.dislikes,\")\")),o.a.createElement(h.a,{\"aria-label\":\"Add to favorites\"},o.a.createElement(d.a,{className:\"text-16 mr-8\",onClick:function(){k.a.post(\"toggle-follow/\",{isFollower:_,following:e.item.posterId}).then(function(e){}),D(!_)},color:_?\"primary\":\"default\"},\"favorite\"),o.a.createElement(E.a,{className:\"normal-case\"},\"Share\"),o.a.createElement(E.a,{className:\"normal-case ml-4\"},\"(\",e.shares,\")\")),o.a.createElement(h.a,{\"aria-label\":\"Favorite\"},o.a.createElement(d.a,{className:\"text-16 mr-8\",color:\"action\"},\"comment\"),o.a.createElement(E.a,{className:\"normal-case\"},\"Share\"),o.a.createElement(E.a,{className:\"normal-case ml-4\"},\"(\",e.shares,\")\"))),o.a.createElement(b.a,{className:\"card-footer flex flex-column p-16\",position:\"static\",color:\"default\",elevation:0},o.a.createElement(\"div\",{className:\"flex items-center\"},o.a.createElement(h.a,{onClick:function(){alert(Q),0==Q?U():T(!Q)}},\"comments\",o.a.createElement(d.a,{className:\"text-16 ml-4\",color:\"action\"},\"keyboard_arrow_down\"))),o.a.createElement(v.a,{in:Q,timeout:\"auto\",unmountOnExit:!0},o.a.createElement(x.a,{comment:Q,setComment:T.bind(this),postId:e.item.id,parentCommentId:null}),H.length>0?o.a.createElement(g.a,null,H.map(function(e){return o.a.createElement(N.a,{item:e})})):null))))}}}]);","extractedComments":[]}